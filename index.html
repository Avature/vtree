<!doctype html>
<html>
<head>
<meta charset="utf-8">

<title>JSON Tree Visualizer</title>

<!-- stylesheets -->
<link rel="stylesheet" href="css/vtree.css" type="text/css"/>

<!-- third-party javascript -->
<script src="js/d3.js"></script>
<!-- <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script> -->

<!-- our javascript -->
<script src="js/layout.vtree.js"></script>
<script src="js/vtree.js"></script>
<!-- <script src="js/vtree.min.js"></script> -->

<script type="text/javascript">
window.onload = function () {
    var vt;

    vt = vtree( document.getElementById( 'from-text' ).value, document.getElementById( 'container' ) );

    vt.update();


    function showHandler () {
        vt.conf( this.value, this.checked )
            .update();

        if ( this.value === 'showColumn0' && this.checked === false ) {
            document.getElementById( 'showColumn1' ).checked = true;
        } else if ( this.value === 'showColumn1' && this.checked === false ) {
            document.getElementById( 'showColumn0' ).checked = true;
        }
    };

    document.getElementById( 'showArrayNode' ).onclick = showHandler;
    document.getElementById( 'showLinkName' ).onclick = showHandler;
    document.getElementById( 'showColumn0' ).onclick = showHandler;
    document.getElementById( 'showColumn1' ).onclick = showHandler;


    document.getElementById( 'load-json' ).onclick = function () {
        d3.json( document.getElementById( 'json-url' ).value, function ( error, data ) {
            if ( error ) {
                document.getElementById( 'from-text' ).value = error;
                return;
            }

            document.getElementById( 'from-text' ).value = JSON.stringify( data );
        } );
    };


    document.getElementById( 'go-button' ).onclick = function () {
        var v;

        try {
            v = parseInt( document.getElementById( 'maxNameLen' ).value );
            vt.conf( 'maxNameLen', v );
        } catch ( err ) {
        }

        try {
            v = parseInt( document.getElementById( 'maxValueLen' ).value );
            vt.conf( 'maxValueLen', v );
        } catch ( err ) {
        }

        vt.data( document.getElementById( 'from-text' ).value );
        vt.update();
    };
};

</script>

</head>

<body>

<a href="/">Home</a>

<h1>JSON Tree Visualizer</h1>

<p style="text-align: right;">Ver 0.1.9.1.9.1 <a href="https://github.com/ivan111/vtree">github</a></p>

<p style="color: red;">This software converts JSON strings into tree diagrams. For example, it is used to show you AST(Abstract Syntax Tree) as tree diagrams for debugging. In that case, offcourse, you need to translate AST into JSON.</p>

<p style="color: green;">JSON文字列を木構造の図に変換します。例えば、デバッグのためにAST(抽象構文木)を表示することに使えます。もきろん、その場合には、ASTをJSONに変換する必要があります。</p>

<p style="color: blue;">JSON Фёдор Миха́йлович Достое́вский. Борщ AST(Иван Карамазов) вкусный. Я также хотел пирожки.</p>


<div>
<div>
<input id="json-url" type="text" size="75" value="http://">
<input id="load-json" type="button" value="Load JSON">
</div>
<textarea id="from-text" rows="8" cols="80">
["FunctionLiteral", {"name":""}, ["ExpressionStatement", ["Assignment", {"op":"ASSIGN"}, ["VariableProxy", {"name":"x"} ], ["Literal", {"handle":1} ] ] ], ["IfStatement", ["CompareOperation", {"op":"GT"}, ["VariableProxy", {"name":"x"} ], ["Literal", {"handle":0} ] ], ["Block", ["ExpressionStatement", ["Assignment", {"op":"ASSIGN"}, ["VariableProxy", {"name":"y"} ], ["BinaryOperation", {"op":"ADD"}, ["VariableProxy", {"name":"x"} ], ["Literal", {"handle":2} ] ] ] ], ["ExpressionStatement", ["Call", ["VariableProxy", {"name":"print"} ], ["VariableProxy", {"name":"y"} ] ] ] ], ["EmptyStatement"] ] ]
</textarea>
</div>

<div>

<fieldset>
<legend>Functions</legend>
<input id="go-button" type="button" value="Go!">
</fieldset>

<fieldset>
<legend>Show</legend>
<input id="showArrayNode" type="checkbox" value="showArrayNode" checked>Array Node&nbsp;&nbsp;</input>
<input id="showLinkName" type="checkbox" value="showLinkName" checked>Link Name&nbsp;&nbsp;</input>
<input id="showColumn0" type="checkbox" value="showColumn0" checked>Column 1&nbsp;&nbsp;</input>
<input id="showColumn1" type="checkbox" value="showColumn1" checked>Column 2&nbsp;&nbsp;</input>
</fieldset>

<fieldset>
<legend>Max Length</legend>
<label>Column 1: 
<input id="maxNameLen" type="number" min="1" max="256" step="10" size="3" value="32">
</label>
<label>Column 2: 
<input id="maxValueLen" type="number" min="1" max="256" step="10" size="3" value="32">
</label>
</fieldset>

</div>

<div style="clear: both;">
</div>

<div id="container"></div>


<p style="text-align: right;">Created Date: 2014-07-27</p>

</body>

</html>
