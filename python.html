<!doctype html>
<html>
<head>
<meta charset="utf-8">

<title>JSON Tree Visualizer</title>

<!-- stylesheets -->
<link rel="stylesheet" href="css/vtree.css" type="text/css"/>

<!-- third-party javascript -->
<script src="js/d3.js"></script>
<!-- <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script> -->

<!-- our javascript -->
<script src="js/layout.vtree.js"></script>
<script src="js/vtree.js"></script>
<!-- <script src="js/vtree.min.js"></script> -->

<script type="text/javascript">
window.onload = function () {
    var vt;

    vt = vtree( document.getElementById( 'container' ), document.getElementById( 'from-text' ).value );
    vt.mode( vt.MODE_PYTHON_AST );

    vt.update();


    function showHandler () {
        vt.conf( this.value, this.checked )
            .update();

        if ( this.value === 'showColumn0' && this.checked === false ) {
            document.getElementById( 'showColumn1' ).checked = true;
        } else if ( this.value === 'showColumn1' && this.checked === false ) {
            document.getElementById( 'showColumn0' ).checked = true;
        }
    };

    document.getElementById( 'showArrayNode' ).onclick = showHandler;
    document.getElementById( 'showLinkName' ).onclick = showHandler;
    document.getElementById( 'showColumn0' ).onclick = showHandler;
    document.getElementById( 'showColumn1' ).onclick = showHandler;


    document.getElementById( 'go-button' ).onclick = function () {
        var v;

        try {
            v = parseInt( document.getElementById( 'maxNameLen' ).value );
            vt.conf( 'maxNameLen', v );
        } catch ( err ) {
        }

        try {
            v = parseInt( document.getElementById( 'maxValueLen' ).value );
            vt.conf( 'maxValueLen', v );
        } catch ( err ) {
        }

        vt.data( document.getElementById( 'from-text' ).value );
        vt.update();
    };
};

</script>

</head>

<body>

<div>
<textarea id="from-text" rows="8" cols="80">
{ "_PyType": "Module", "body": [ { "_PyType": "If", "test": { "_PyType": "Compare", "left": { "_PyType": "Name", "id": "a", "ctx": { "_PyType": "Load" } }, "ops": [ { "_PyType": "Eq" } ], "comparators": [ { "_PyType": "Num", "n": 3 } ] }, "body": [ { "_PyType": "Print", "dest": null, "values": [ { "_PyType": "Str", "s": "hello" } ], "nl": true } ], "orelse": [  ] } ] }
</textarea>
</div>

<div>

<fieldset>
<legend>Functions</legend>
<input id="go-button" type="button" value="Go!">
</fieldset>

<fieldset>
<legend>Show</legend>
<input id="showArrayNode" type="checkbox" value="showArrayNode" checked>Array Node&nbsp;&nbsp;</input>
<input id="showLinkName" type="checkbox" value="showLinkName" checked>Link Name&nbsp;&nbsp;</input>
<input id="showColumn0" type="checkbox" value="showColumn0" checked>Column 1&nbsp;&nbsp;</input>
<input id="showColumn1" type="checkbox" value="showColumn1" checked>Column 2&nbsp;&nbsp;</input>
</fieldset>

<fieldset>
<legend>Max Length</legend>
<label>Column 1: 
<input id="maxNameLen" type="number" min="1" max="256" step="10" size="3" value="32">
</label>
<label>Column 2: 
<input id="maxValueLen" type="number" min="1" max="256" step="10" size="3" value="32">
</label>
</fieldset>

</div>

<div style="clear: both;">
</div>

<div id="container"></div>


</body>

</html>
